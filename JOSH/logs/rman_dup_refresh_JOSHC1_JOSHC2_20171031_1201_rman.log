
Recovery Manager: Release 12.1.0.2.0 - Production on Tue Oct 31 12:02:33 2017

Copyright (c) 1982, 2014, Oracle and/or its affiliates.  All rights reserved.
ORACLE_HOME = /apps/oracle/product/12.1.0.2/dbhome_1
System name:	Linux
Node name:	oel6-db-dg
Release:	3.8.13-44.1.1.el6uek.x86_64
Version:	#2 SMP Wed Sep 10 06:10:25 PDT 2014
Machine:	x86_64

Starting with debugging turned off


RMAN> 
RMAN> 
connected to target database: JOSHC1 (DBID=1227483360)

RMAN> 
connected to auxiliary database: JOSHC2 (not mounted)

RMAN> 
RMAN> 2> 3> 4> 5> 6> 7> 8> 9> 10> 
using target database control file instead of recovery catalog
old RMAN configuration parameters:
CONFIGURE DEVICE TYPE DISK PARALLELISM 8 BACKUP TYPE TO COMPRESSED BACKUPSET;
new RMAN configuration parameters:
CONFIGURE DEVICE TYPE DISK PARALLELISM 8 BACKUP TYPE TO COMPRESSED BACKUPSET;
new RMAN configuration parameters are successfully stored

Starting Duplicate Db at 2017-10-31 12:02:35
allocated channel: ORA_AUX_DISK_1
channel ORA_AUX_DISK_1: SID=6 device type=DISK
allocated channel: ORA_AUX_DISK_2
channel ORA_AUX_DISK_2: SID=57 device type=DISK
allocated channel: ORA_AUX_DISK_3
channel ORA_AUX_DISK_3: SID=109 device type=DISK
allocated channel: ORA_AUX_DISK_4
channel ORA_AUX_DISK_4: SID=160 device type=DISK
allocated channel: ORA_AUX_DISK_5
channel ORA_AUX_DISK_5: SID=8 device type=DISK
allocated channel: ORA_AUX_DISK_6
channel ORA_AUX_DISK_6: SID=58 device type=DISK
allocated channel: ORA_AUX_DISK_7
channel ORA_AUX_DISK_7: SID=110 device type=DISK
allocated channel: ORA_AUX_DISK_8
channel ORA_AUX_DISK_8: SID=161 device type=DISK
current log archived

contents of Memory Script:
{
   sql clone "create spfile from memory";
}
executing Memory Script

sql statement: create spfile from memory

contents of Memory Script:
{
   shutdown clone immediate;
   startup clone nomount;
}
executing Memory Script

Oracle instance shut down

connected to auxiliary database (not started)
Oracle instance started

Total System Global Area     281018368 bytes

Fixed Size                     2923440 bytes
Variable Size                222299216 bytes
Database Buffers              50331648 bytes
Redo Buffers                   5464064 bytes

contents of Memory Script:
{
   sql clone "alter system set  db_name = 
 ''JOSHC1'' comment=
 ''Modified by RMAN duplicate'' scope=spfile";
   sql clone "alter system set  db_unique_name = 
 ''JOSHC2'' comment=
 ''Modified by RMAN duplicate'' scope=spfile";
   shutdown clone immediate;
   startup clone force nomount
   restore clone from service  'JOSHC1' primary controlfile;
   alter clone database mount;
}
executing Memory Script

sql statement: alter system set  db_name =  ''JOSHC1'' comment= ''Modified by RMAN duplicate'' scope=spfile

sql statement: alter system set  db_unique_name =  ''JOSHC2'' comment= ''Modified by RMAN duplicate'' scope=spfile

Oracle instance shut down

Oracle instance started

Total System Global Area     281018368 bytes

Fixed Size                     2923440 bytes
Variable Size                222299216 bytes
Database Buffers              50331648 bytes
Redo Buffers                   5464064 bytes

Starting restore at 2017-10-31 12:03:18
allocated channel: ORA_AUX_DISK_1
channel ORA_AUX_DISK_1: SID=6 device type=DISK
allocated channel: ORA_AUX_DISK_2
channel ORA_AUX_DISK_2: SID=57 device type=DISK
allocated channel: ORA_AUX_DISK_3
channel ORA_AUX_DISK_3: SID=109 device type=DISK
allocated channel: ORA_AUX_DISK_4
channel ORA_AUX_DISK_4: SID=160 device type=DISK
allocated channel: ORA_AUX_DISK_5
channel ORA_AUX_DISK_5: SID=7 device type=DISK
allocated channel: ORA_AUX_DISK_6
channel ORA_AUX_DISK_6: SID=110 device type=DISK
allocated channel: ORA_AUX_DISK_7
channel ORA_AUX_DISK_7: SID=58 device type=DISK
allocated channel: ORA_AUX_DISK_8
channel ORA_AUX_DISK_8: SID=161 device type=DISK

channel ORA_AUX_DISK_1: starting datafile backup set restore
channel ORA_AUX_DISK_1: using network backup set from service JOSHC1
channel ORA_AUX_DISK_1: restoring control file
channel ORA_AUX_DISK_1: restore complete, elapsed time: 00:00:02
output file name=/oradata/JOSHC2/cntrlJOSHC2_01.dbf
output file name=/redo/JOSHC2/cntrlJOSHC2_02.dbf
Finished restore at 2017-10-31 12:03:22

database mounted

contents of Memory Script:
{
   set newname for clone datafile  1 to new;
   set newname for clone datafile  2 to new;
   set newname for clone datafile  3 to new;
   set newname for clone datafile  4 to new;
   set newname for clone datafile  5 to new;
   restore
   from service  'JOSHC1'   clone database
   ;
   sql 'alter system archive log current';
}
executing Memory Script

executing command: SET NEWNAME

executing command: SET NEWNAME

executing command: SET NEWNAME

executing command: SET NEWNAME

executing command: SET NEWNAME

Starting restore at 2017-10-31 12:03:26
using channel ORA_AUX_DISK_1
using channel ORA_AUX_DISK_2
using channel ORA_AUX_DISK_3
using channel ORA_AUX_DISK_4
using channel ORA_AUX_DISK_5
using channel ORA_AUX_DISK_6
using channel ORA_AUX_DISK_7
using channel ORA_AUX_DISK_8

channel ORA_AUX_DISK_1: starting datafile backup set restore
channel ORA_AUX_DISK_1: using network backup set from service JOSHC1
channel ORA_AUX_DISK_1: specifying datafile(s) to restore from backup set
channel ORA_AUX_DISK_1: restoring datafile 00001 to /oradata/JOSHC2/datafile/o1_mf_system_%u_.dbf
channel ORA_AUX_DISK_2: starting datafile backup set restore
channel ORA_AUX_DISK_2: using network backup set from service JOSHC1
channel ORA_AUX_DISK_2: specifying datafile(s) to restore from backup set
channel ORA_AUX_DISK_2: restoring datafile 00002 to /oradata/JOSHC2/datafile/o1_mf_system_%u_.dbf
channel ORA_AUX_DISK_3: starting datafile backup set restore
channel ORA_AUX_DISK_3: using network backup set from service JOSHC1
channel ORA_AUX_DISK_3: specifying datafile(s) to restore from backup set
channel ORA_AUX_DISK_3: restoring datafile 00003 to /oradata/JOSHC2/datafile/o1_mf_sysaux_%u_.dbf
channel ORA_AUX_DISK_4: starting datafile backup set restore
channel ORA_AUX_DISK_4: using network backup set from service JOSHC1
channel ORA_AUX_DISK_4: specifying datafile(s) to restore from backup set
channel ORA_AUX_DISK_4: restoring datafile 00004 to /oradata/JOSHC2/datafile/o1_mf_sysaux_%u_.dbf
channel ORA_AUX_DISK_5: starting datafile backup set restore
channel ORA_AUX_DISK_5: using network backup set from service JOSHC1
channel ORA_AUX_DISK_5: specifying datafile(s) to restore from backup set
channel ORA_AUX_DISK_5: restoring datafile 00005 to /oradata/JOSHC2/datafile/o1_mf_undotbs1_%u_.dbf
channel ORA_AUX_DISK_2: restore complete, elapsed time: 00:00:04
channel ORA_AUX_DISK_1: restore complete, elapsed time: 00:00:08
channel ORA_AUX_DISK_4: restore complete, elapsed time: 00:00:08
channel ORA_AUX_DISK_3: restore complete, elapsed time: 00:00:16
channel ORA_AUX_DISK_5: restore complete, elapsed time: 00:00:15
Finished restore at 2017-10-31 12:03:42

sql statement: alter system archive log current
current log archived

contents of Memory Script:
{
   restore clone force from service  'JOSHC1' 
           archivelog from scn  3708914;
   switch clone datafile all;
}
executing Memory Script

Starting restore at 2017-10-31 12:03:42
using channel ORA_AUX_DISK_1
using channel ORA_AUX_DISK_2
using channel ORA_AUX_DISK_3
using channel ORA_AUX_DISK_4
using channel ORA_AUX_DISK_5
using channel ORA_AUX_DISK_6
using channel ORA_AUX_DISK_7
using channel ORA_AUX_DISK_8

channel ORA_AUX_DISK_1: starting archived log restore to default destination
channel ORA_AUX_DISK_1: using network backup set from service JOSHC1
channel ORA_AUX_DISK_1: restoring archived log
archived log thread=1 sequence=374
channel ORA_AUX_DISK_2: starting archived log restore to default destination
channel ORA_AUX_DISK_2: using network backup set from service JOSHC1
channel ORA_AUX_DISK_2: restoring archived log
archived log thread=1 sequence=375
channel ORA_AUX_DISK_1: restore complete, elapsed time: 00:00:00
channel ORA_AUX_DISK_2: restore complete, elapsed time: 00:00:01
Finished restore at 2017-10-31 12:03:43

datafile 1 switched to datafile copy
input datafile copy RECID=13 STAMP=958824223 file name=/oradata/JOSHC2/datafile/o1_mf_system_dzjsngnk_.dbf
datafile 2 switched to datafile copy
input datafile copy RECID=14 STAMP=958824223 file name=/oradata/JOSHC2/datafile/o1_mf_system_dzjsngrx_.dbf
datafile 3 switched to datafile copy
input datafile copy RECID=15 STAMP=958824223 file name=/oradata/JOSHC2/datafile/o1_mf_sysaux_dzjsnh32_.dbf
datafile 4 switched to datafile copy
input datafile copy RECID=16 STAMP=958824223 file name=/oradata/JOSHC2/datafile/o1_mf_sysaux_dzjsnh2g_.dbf
datafile 5 switched to datafile copy
input datafile copy RECID=17 STAMP=958824223 file name=/oradata/JOSHC2/datafile/o1_mf_undotbs1_dzjsnh8y_.dbf

contents of Memory Script:
{
   set until scn  3709180;
   recover
   clone database
    delete archivelog
   ;
}
executing Memory Script

executing command: SET until clause

Starting recover at 2017-10-31 12:03:43
using channel ORA_AUX_DISK_1
using channel ORA_AUX_DISK_2
using channel ORA_AUX_DISK_3
using channel ORA_AUX_DISK_4
using channel ORA_AUX_DISK_5
using channel ORA_AUX_DISK_6
using channel ORA_AUX_DISK_7
using channel ORA_AUX_DISK_8

starting media recovery

archived log for thread 1 with sequence 374 is already on disk as file /backup/JOSHC2/archivelog/2017_10_31/o1_mf_1_374_dzjsnynm_.arc
archived log for thread 1 with sequence 375 is already on disk as file /backup/JOSHC2/archivelog/2017_10_31/o1_mf_1_375_dzjsnys9_.arc
archived log file name=/backup/JOSHC2/archivelog/2017_10_31/o1_mf_1_374_dzjsnynm_.arc thread=1 sequence=374
archived log file name=/backup/JOSHC2/archivelog/2017_10_31/o1_mf_1_375_dzjsnys9_.arc thread=1 sequence=375
media recovery complete, elapsed time: 00:00:00
Finished recover at 2017-10-31 12:03:44
Oracle instance started

Total System Global Area     281018368 bytes

Fixed Size                     2923440 bytes
Variable Size                222299216 bytes
Database Buffers              50331648 bytes
Redo Buffers                   5464064 bytes

contents of Memory Script:
{
   sql clone "alter system set  db_name = 
 ''JOSHC2'' comment=
 ''Reset to original value by RMAN'' scope=spfile";
   sql clone "alter system reset  db_unique_name scope=spfile";
}
executing Memory Script

sql statement: alter system set  db_name =  ''JOSHC2'' comment= ''Reset to original value by RMAN'' scope=spfile

sql statement: alter system reset  db_unique_name scope=spfile
Oracle instance started

Total System Global Area     281018368 bytes

Fixed Size                     2923440 bytes
Variable Size                222299216 bytes
Database Buffers              50331648 bytes
Redo Buffers                   5464064 bytes
sql statement: CREATE CONTROLFILE REUSE SET DATABASE "JOSHC2" RESETLOGS ARCHIVELOG 
  MAXLOGFILES     16
  MAXLOGMEMBERS      3
  MAXDATAFILES     1024
  MAXINSTANCES     8
  MAXLOGHISTORY      292
 LOGFILE
  GROUP   1  SIZE 50 M ,
  GROUP   2  SIZE 50 M ,
  GROUP   3  SIZE 50 M 
 DATAFILE
  '/oradata/JOSHC2/datafile/o1_mf_system_dzjsngnk_.dbf',
  '/oradata/JOSHC2/datafile/o1_mf_system_dzjsngrx_.dbf'
 CHARACTER SET AL32UTF8


contents of Memory Script:
{
   set newname for clone tempfile  1 to new;
   set newname for clone tempfile  2 to new;
   switch clone tempfile all;
   catalog clone datafilecopy  "/oradata/JOSHC2/datafile/o1_mf_sysaux_dzjsnh32_.dbf", 
 "/oradata/JOSHC2/datafile/o1_mf_sysaux_dzjsnh2g_.dbf", 
 "/oradata/JOSHC2/datafile/o1_mf_undotbs1_dzjsnh8y_.dbf";
   switch clone datafile all;
}
executing Memory Script

executing command: SET NEWNAME

executing command: SET NEWNAME

renamed tempfile 1 to /oradata/JOSHC2/datafile/o1_mf_temp_%u_.tmp in control file
renamed tempfile 2 to /oradata/JOSHC2/datafile/o1_mf_temp_%u_.tmp in control file

cataloged datafile copy
datafile copy file name=/oradata/JOSHC2/datafile/o1_mf_sysaux_dzjsnh32_.dbf RECID=1 STAMP=958824243
cataloged datafile copy
datafile copy file name=/oradata/JOSHC2/datafile/o1_mf_sysaux_dzjsnh2g_.dbf RECID=2 STAMP=958824243
cataloged datafile copy
datafile copy file name=/oradata/JOSHC2/datafile/o1_mf_undotbs1_dzjsnh8y_.dbf RECID=3 STAMP=958824243

datafile 3 switched to datafile copy
input datafile copy RECID=1 STAMP=958824243 file name=/oradata/JOSHC2/datafile/o1_mf_sysaux_dzjsnh32_.dbf
datafile 4 switched to datafile copy
input datafile copy RECID=2 STAMP=958824243 file name=/oradata/JOSHC2/datafile/o1_mf_sysaux_dzjsnh2g_.dbf
datafile 5 switched to datafile copy
input datafile copy RECID=3 STAMP=958824243 file name=/oradata/JOSHC2/datafile/o1_mf_undotbs1_dzjsnh8y_.dbf
Reenabling controlfile options for auxiliary database
Executing: alter database force logging

contents of Memory Script:
{
   Alter clone database open resetlogs;
}
executing Memory Script

database opened
Cannot remove created server parameter file
Finished Duplicate Db at 2017-10-31 12:04:05

RMAN> 
RMAN> 

Recovery Manager complete.
